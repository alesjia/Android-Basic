# Http
## 基本概念
### 持久链接
* 出现的问题：初始Http版本，每进行一次Http请求就会断开一次TCP链接。这样就会导致一个问题。比如请求一个页面，如果这个页面包括多个图片，那么这个时候需要多个http请求，按照初始的http实现，这个时候会导致多次的TCP建链和断链操作，增加系统开销。
* 使用持久链接，也就是http的keep-alive方法，就不会存在类似的问题。
* 持久链接：只要任意一端没有明确提出断开链接，那么就保持TCP链接。
* 持久链接需要客户端和服务端的支持
### 管线化
* 持久链接使得管线化成为可能
* 之前http发出一个请求，需要等待响应之后才能再发送下一个请求。
* 管线话则不用等到响应就可以发出下一个请求，支持并行发送多个请求。
### Cookie
Cookie技术是通过在客户端和服务端写入cookie信息来控制客户端的状态。
客户端接收到服务器响应报文内的一个set-cookie的首部字段信息，把这个信息保存在客户端。下次客户端再向服务器发送请求时，客户端会自动在请求报文中加入cookie值后发送出去。
### Http状态码
1XX：信息性状态码
2XX：成功状态码
3XX：重定向状态码
4XX：客户端状态码
* 400：请求的报文格式存在语法错误
* 401：http认证失败
* 403：服务器拒绝请求该资源
* 404：服务器没有请求的资源
5XX：服务器状态码
500：服务器端执行请求的时候发生错误，内部错误
501：服务不可用
### 与Http协作的Web服务器
#### 通信数据转发程序
* 代理
* 网关
* 隧道
#### 保存资源的缓存
* 缓存服务器
* 客户端缓存

### 确保Web安全的Https
#### Http的缺点
* 通信使用明文，内容可能会被窃听
通信加密，如SSL（Secure Socket Layer），TLS（Transport Layer Security）
内容加密（http报文头不加密，http报文体加密）
* 不验证通信方的身份，因为可能会遭遇伪装
可能存在伪装的Web服务器和Web客户端
通过证书来认证
* 无法证明报文的完整性，所以有可能已遭篡改
#### HTTPS = HTTP+加密+认证+完整性保护
* 共享密钥加密（对称加密）
* 公开密钥加密（非对称加密）
HTTPS使用混合加密机制
1.如何证明公开密钥本身就是货真价实的公开密钥？
可以由数字证书认证机构和其相关机关颁发的公开密钥证书
2.如何获取认证证书？
服务器的运营人员向CA提出公开密钥认证的申请
CA在判明申请者身份后，对已申请的公开密钥做数字签名
服务器将公钥证书发送给客户端
客户端使用CA的公开密钥对公钥证书进行验证
### 确认访问用户身份的认证
#### 1. Basic认证
通过质询和响应的方式，将用户Id和密码通过“：”连接起来，然后通过Base64编码，最后生成字符串传送给服务器。Base64编码并不进行加密处理。
#### 2. Digest认证
通过质询和响应的方式
#### 3. SSL客户端认证
#### 4. 基于表单的认证
* 客户端将用户id和密码等登陆信息放入报文的实体部分，通过post方式把请求发送给服务器
* 客户端的发送过来的登陆信息通过身份认证后，服务器会发放用以识别用户的Session id
* 客户端收到服务器端发过来的session id，会将其作为Cookie保存在本地
